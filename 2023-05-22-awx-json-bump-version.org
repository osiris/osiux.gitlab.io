#+TITLE:       =awx-json-bump-version=
#+DESCRIPTION: Incrementar la version de un project o job template de AWX usando awx-json-bump-version
#+AUTHOR:      Osiris Alejandro Gomez
#+EMAIL:       osiux@osiux.com
#+LANGUAGE:    es
#+LINK_HOME:   index.html
#+INCLUDE:     header.org
#+KEYWORDS:    Ansible, AnsibleTools, AWX, JSON, Release, SemVer
#+DATE:        2023-05-22 20:12
#+HTML_HEAD:   <meta property="og:title" content="=awx-json-bump-version=" />
#+HTML_HEAD:   <meta property="og:description" content="Incrementar la version de un project o job template de AWX usando awx-json-bump-version" />
#+HTML_HEAD:   <meta property="og:type" content="article" />
#+HTML_HEAD:   <meta property="og:article:published_time" content="2023-05-22" />
#+HTML_HEAD:   <meta property="og:article:author" content="Osiris Alejandro Gomez" />
#+HTML_HEAD:   <meta property="og:url" content="https://osiux.com/2023-05-22-awx-json-bump-version.html" />
#+HTML_HEAD:   <meta property="og:site_name" content="OSiUX" />
#+HTML_HEAD:   <meta property="og:locale" content="es_AR" />
#+HTML_HEAD:   <meta property="og:image" content="https://osiux.com/img/ansible-tools/awx-json-bump-version.png" />

[[file:img/ansible-tools/awx-json-bump-version.png][file:tmb/ansible-tools/awx-json-bump-version.png]]

A diario para el /deploy/ de /playbooks/ de =Ansible= [fn:ansible]
necesito incrementar el número de versión de /projects/ y/o
/job_templates/ de =AWX= [fn:awx] y para realizar esta tarea escribí un
/script/ que por defecto incrementa el último dígito, es decir =PATCH=
en =Semantic Versioning= [fn:semver] y lo hace copiando un nuevo archivo
con el nuevo /release/ en el nombre del archivo /JSON/ y también dentro
del archivo en el atributo =name=, por ejemplo:

#+BEGIN_EXAMPLE

# awx-json-bump-version job_template/ipa_sss_log_v0.1.0.json
BUMP VERSION FROM job_template/ipa_sss_log_v0.1.0.json TO job_template/ipa_sss_log_v0.1.1.json

    "name": "ipa_sss_log_v0.1.0",     |	    "name": "ipa_sss_log_v0.1.1",

#+END_EXAMPLE

Es posible especificar que incremente =MINOR=:

#+BEGIN_EXAMPLE

# VERSION=MINOR awx-json-bump-version job_template/ipa_sss_log_v0.1.0.json
BUMP VERSION FROM job_template/ipa_sss_log_v0.1.0.json TO job_template/ipa_sss_log_v0.2.0.json

    "name": "ipa_sss_log_v0.1.0",     |	    "name": "ipa_sss_log_v0.2.0",

#+END_EXAMPLE

También se puede especificar =MAJOR=:

#+BEGIN_EXAMPLE

# VERSION=MAJOR awx-json-bump-version job_template/ipa_sss_log_v0.1.0.json
BUMP VERSION FROM job_template/ipa_sss_log_v0.1.0.json TO job_template/ipa_sss_log_v1.0.0.json

    "name": "ipa_sss_log_v0.1.0",     |	    "name": "ipa_sss_log_v1.0.0",

#+END_EXAMPLE

Y si se pretende ser explícito se puede especificar =PATCH=:

#+BEGIN_EXAMPLE

# VERSION=PATCH awx-json-bump-version job_template/ipa_sss_log_v0.1.0.json
BUMP VERSION FROM job_template/ipa_sss_log_v0.1.0.json TO job_template/ipa_sss_log_v0.1.1.json

    "name": "ipa_sss_log_v0.1.0",     |	    "name": "ipa_sss_log_v0.1.1",

#+END_EXAMPLE

No es una gran ciencia, pero contar con el /script/
=awx-json-bump-version= [fn:awx-json-bump-version] que simplifica la
tarea ayuda y agiliza la tarea, e incluso a futuro permitirá
automatización de generación de nuevos /releases/.

Este /script/ junto a muchas otras utilidades es parte del repositorio
=Ansible Tools= [fn:ansible-tools].

[fn:semver]                 https://semver.org/spec/v2.0.0.html
[fn:awx]                    https://github.com/ansible/awx/
[fn:awx-json-bump-version]  https://gitlab.com/osiux/ansible_tools/-/raw/develop/awx-json-bump-version
[fn:ansible]                https://www.ansible.com/
[fn:ansible-tools]          https://gitlab.com/osiux/ansible_tools/
